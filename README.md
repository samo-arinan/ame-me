# 青空文庫リーダー

縦書き巻物風の読書体験を提供するProgressive Web App

## 機能

### 基本機能
- 青空文庫から作品を検索・表示
- 縦書きレイアウトで日本の伝統的な読書体験
- 巻物のような横スクロールインターフェース
- PWA対応（オフライン読書可能）
- 響応的デザイン（スマートフォン・タブレット対応）

### 高度な機能
- OpenAI APIによる感情分析
- 感情に連動した雨のビジュアルエフェクト
  - 悲しい場面：雨が強く降る
  - 楽しい場面：虹が出現
  - 緊張する場面：風を伴う斜めの雨
  - 怒りの場面：雷を伴う激しい雨
- 文字サイズ調整
- 読書位置の保存（IndexedDB）

## 技術スタック

- **フロントエンド**: Svelte + SvelteKit
- **データベース**: IndexedDB (idb)
- **アニメーション**: HTML5 Canvas
- **PWA**: Service Worker
- **感情分析**: OpenAI GPT-4o mini API

## 開発・起動方法

```bash
# 依存関係のインストール
npm install

# 開発サーバー起動
npm run dev

# プロダクションビルド
npm run build

# プロダクション確認
npm run preview
```

## 設定

### OpenAI API
感情分析機能を使用するには、OpenAI API キーが必要です。

1. アプリの設定ボタンをクリック
2. OpenAI API キーを入力
3. 保存

キーはブラウザのLocalStorageに保存され、外部に送信されません。

## 青空文庫について

このアプリは[青空文庫](https://www.aozora.gr.jp/)の公開データを使用しています。

### データアクセス方法

以下の方法で青空文庫データにアクセスします：

1. **作品データベース**: 拡張されたサンプルデータ（40作品以上）
   - 太宰治（走れメロス、人間失格、津軽、ヴィヨンの妻）
   - 芥川龍之介（羅生門、蜘蛛の糸、鼻、地獄変）
   - 夏目漱石（こころ、坊っちゃん、吾輩は猫である、三四郎）
   - 宮沢賢治（銀河鉄道の夜、注文の多い料理店、セロ弾きのゴーシュ）
   - その他名作（山月記、舞姫、檸檬、ごん狐など）

2. **テキストデータ**: [青空文庫GitHub](https://github.com/aozorahack/aozorabunko_text)から直接取得

3. **検索機能**: 作品名・著者名での部分一致検索

4. **フォールバック**: GitHubアクセス失敗時はサンプルテキストを表示

### スケーラビリティ

- **API設計**: 青空文庫公式CSVデータとの連携準備済み
- **拡張可能**: 追加作品は簡単にデータベースに追加可能
- **将来対応**: 15,000作品以上の全青空文庫データベースに対応予定

## ライセンス

MIT License

## 開発メモ

プロジェクトの詳細な設計と開発方針については `CLAUDE.md` を参照してください。